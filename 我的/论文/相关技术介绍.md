# 相关技术介绍

## 前端相关技术介绍

### Android开发介绍

> 下面这些从安卓开发官网抄的

Android 操作系统是一种多用户 Linux 系统，其中的每个应用都是一个不同的用户。系统会为应用中的所有文件设置权限，使得只有分配给该应用的用户 ID 才能访问这些文件。默认情况下，每个应用都在其自己的 Linux 进程内运行。Android 系统会在需要执行任何应用组件时启动该进程，然后当不再需要该进程或系统必须为其他应用恢复内存时，其便会关闭该进程。可以使用 Kotlin、Java 和 C++ 语言编写 Android 应用。Android SDK 工具会将您的代码连同任何数据和资源文件编译成一个 APK（*Android 软件包*），即带有 `.apk` 后缀的归档文件。一个 APK 文件包含 Android 应用的所有内容，它也是 Android 设备用来安装应用的文件。

应用组件是 Android 应用的基本构建块。共有四种不同的应用组件类型：

* Activity
* 服务
* 广播接收器
* 内容提供程序

每种类型都有不同的用途和生命周期，后者会定义如何创建和销毁组件。以下部分将介绍应用组件的四种类型。

* **Activity**

  *Activity* 是与用户交互的入口点。它表示拥有界面的单个屏幕。例如，电子邮件应用可能有一个显示新电子邮件列表的 Activity、一个用于撰写电子邮件的 Activity 以及一个用于阅读电子邮件的 Activity。尽管这些 Activity 通过协作在电子邮件应用中形成一种紧密结合的用户体验，但每个 Activity 都独立于其他 Activity 而存在。因此，其他应用可以启动其中任何一个 Activity（如果电子邮件应用允许）。例如，相机应用可以启动电子邮件应用内用于撰写新电子邮件的 Activity，以便用户共享图片。Activity 有助于完成系统和应用程序之间的以下重要交互：追踪用户当前关心的内容（屏幕上显示的内容），以确保系统继续运行托管 Activity 的进程。了解先前使用的进程包含用户可能返回的内容（已停止的 Activity），从而更优先保留这些进程。帮助应用处理终止其进程的情况，以便用户可以返回已恢复其先前状态的 Activity。提供一种途径，让应用实现彼此之间的用户流，并让系统协调这些用户流。（此处最经典的示例是共享。）您需将 Activity 作为 `Activity` 类的子类来实现。如需了解有关 `Activity` 类的更多信息，请参阅 [Activity](https://developer.android.google.cn/guide/components/activities) 开发者指南。

* **服务**

  服务是一个通用入口点，用于因各种原因使应用在后台保持运行状态。它是一种在后台运行的组件，用于执行长时间运行的操作或为远程进程执行作业。服务不提供界面。例如，当用户使用其他应用时，服务可能会在后台播放音乐或通过网络获取数据，但这不会阻断用户与 Activity 的交互。诸如 Activity 等其他组件可以启动服务，使该服务运行或绑定到该服务，以便与其进行交互。事实上，有两种截然不同的语义服务可以告知系统如何管理应用：已启动服务会告知系统使其运行至工作完毕。此类工作可以是在后台同步一些数据，或者在用户离开应用后继续播放音乐。在后台同步数据或播放音乐也代表了两种不同类型的已启动服务，而这些服务可以修改系统处理它们的方式：音乐播放是用户可直接感知的服务，因此，应用会向用户发送通知，表明其希望成为前台，从而告诉系统此消息；在此情况下，系统明白它应尽全力维持该服务进程运行，因为进程消失会令用户感到不快。通常，用户不会意识到常规后台服务正处于运行状态，因此系统可以更自由地管理其进程。如果系统需要使用 RAM 来处理用户更迫切关注的内容，则其可能允许终止服务（然后在稍后的某个时刻重启服务）。绑定服务之所以能运行，原因是某些其他应用（或系统）已表示希望使用该服务。从根本上讲，这是为另一个进程提供 API 的服务。因此，系统会知晓这些进程之间存在依赖关系，所以如果进程 A 绑定到进程 B 中的服务，系统便知道自己需使进程 B（及其服务）为进程 A 保持运行状态。此外，如果进程 A 是用户关心的内容，系统随即也知道将进程 B 视为用户关心的内容。由于存在灵活性（无论好坏），服务已成为非常有用的构建块，并且可实现各种高级系统概念。动态壁纸、通知侦听器、屏幕保护程序、输入方法、无障碍功能服务以及众多其他核心系统功能均可构建为在其运行时由应用实现、系统绑定的服务。您需将服务作为 `Service` 的子类来实现。如需了解有关 `Service` 类的更多信息，请参阅[服务](https://developer.android.google.cn/guide/components/services)开发者指南。**注意：**如果您的应用面向 Android 5.0（API 级别 21）或更高版本，请使用 `JobScheduler` 类来调度操作。JobScheduler 的优势在于，它能通过优化作业调度来降低功耗，以及使用 [Doze](https://developer.android.google.cn/training/monitoring-device-state/doze-standby) API，从而达到省电目的。如需了解有关使用此类的更多信息，请参阅 `JobScheduler` 参考文档。

* **广播接收器**

  借助*广播接收器*组件，系统能够在常规用户流之外向应用传递事件，从而允许应用响应系统范围内的广播通知。由于广播接收器是另一个明确定义的应用入口，因此系统甚至可以向当前未运行的应用传递广播。例如，应用可通过调度提醒来发布通知，以告知用户即将发生的事件。而且，通过将该提醒传递给应用的广播接收器，应用在提醒响起之前即无需继续运行。许多广播均由系统发起，例如，通知屏幕已关闭、电池电量不足或已拍摄照片的广播。应用也可发起广播，例如，通知其他应用某些数据已下载至设备，并且可供其使用。尽管广播接收器不会显示界面，但其可以[创建状态栏通知](https://developer.android.google.cn/guide/topics/ui/notifiers/notifications)，在发生广播事件时提醒用户。但广播接收器更常见的用途只是作为通向其他组件的*通道*，旨在执行极少量的工作。例如，它可能会根据带 `JobScheduler` 的事件调度 `JobService` 来执行某项工作广播接收器作为 `BroadcastReceiver` 的子类实现，并且每条广播都作为 `Intent` 对象进行传递。如需了解详细信息，请参阅 `BroadcastReceiver` 类。

* **内容提供程序**

  *内容提供程序*管理一组共享的应用数据，您可以将这些数据存储在文件系统、SQLite 数据库、网络中或者您的应用可访问的任何其他持久化存储位置。其他应用可通过内容提供程序查询或修改数据（如果内容提供程序允许）。例如，Android 系统可提供管理用户联系人信息的内容提供程序。因此，任何拥有适当权限的应用均可查询内容提供程序（如 `ContactsContract.Data`），以读取和写入特定人员的相关信息。我们很容易将内容提供程序看作数据库上的抽象，因为其内置的大量 API 和支持时常适用于这一情况。但从系统设计的角度看，二者的核心目的不同。对系统而言，内容提供程序是应用的入口点，用于发布由 URI 架构识别的已命名数据项。因此，应用可以决定如何将其包含的数据映射到 URI 命名空间，进而将这些 URI 分发给其他实体。反之，这些实体也可使用分发的 URI 来访问数据。在管理应用的过程中，系统可以执行以下特殊操作：分配 URI 无需应用保持运行状态，因此 URI 可在其所属的应用退出后继续保留。当系统必须从相应的 URI 检索应用数据时，系统只需确保所属应用仍处于运行状态。这些 URI 还会提供重要的细粒度安全模型。例如，应用可将其所拥有图像的 URI 放到剪贴板上，但将其内容提供程序锁定，以便其他应用程序无法随意访问它。当第二个应用尝试访问剪贴板上的 URI 时，系统可允许该应用通过临时的 *URI 授权*来访问数据，这样便只能访问 URI 后面的数据，而非第二个应用中的其他任何内容。内容提供程序也适用于读取和写入您的应用不共享的私有数据。内容提供程序作为 `ContentProvider` 的子类实现，并且其必须实现一组标准 API，以便其他应用能够执行事务。如需了解详细信息，请参阅[内容提供程序](https://developer.android.google.cn/guide/topics/providers/content-providers)开发者指南。

Android 系统设计的独特之处在于，任何应用都可启动其他应用的组件。例如，当您想让用户使用设备相机拍摄照片时，另一个应用可能也可执行该操作，因而您的应用便可使用该应用，而非自行产生一个 Activity 来拍摄照片。您无需加入甚至链接到该相机应用的代码。只需启动拍摄照片的相机应用中的 Activity 即可。完成拍摄时，系统甚至会将照片返回您的应用，以便您使用。对用户而言，这就如同相机是您应用的一部分。

当系统启动某个组件时，它会启动该应用的进程（如果尚未运行），并实例化该组件所需的类。例如，如果您的应用启动相机应用中拍摄照片的 Activity，则该 Activity 会在属于相机应用的进程（而非您的应用进程）中运行。因此，与大多数其他系统上的应用不同，Android 应用并没有单个入口点（即没有 `main()` 函数）。

由于系统在单独的进程中运行每个应用，且其文件权限会限制对其他应用的访问，因此您的应用无法直接启动其他应用中的组件，但 Android 系统可以。如要启动其他应用中的组件，请向系统传递一条消息，说明启动特定组件的 *Intent*。系统随后便会为您启动该组件。

### Kotlin语言

> 这是从Kotlin实战抄的

Kotlin目前是Android的第一开发语言，本项目的前端与后端都将使用Kotlin开发。Kotlin是一种针对Java平台的新编程语言，Kotlin想法的构思于2010年诞生与JetBrains公司。Kotlin简洁、安全、务实，并且专注于与Java代码的互操作性。它几乎可以用在现在Java使用的任何地方：服务器端开发、Android应用，等等。Kotlin可以很好地和所有现存的Java库和框架一起工作，而且性能水平和Java旗鼓相当。

### 百度地图SDK

本项目接入了百度地图SDK用于实现地图显示、定位、导航、搜索等功能。百度地图目前具有行业第一的市场占有率累计服务50万移动应用，具备多种数据类型，拥有分钟级更新的交通动态数据，覆盖全国主干道路，每分钟级更新拥堵状况，拥堵准确率达99%。

### Android数据库SQLite与LitePal框架

> 抄自sqlite官网https://www.sqlite.org/index.html

Android设备内置了SQLite数据库，SQLite是一种C语言库，它实现了一个小型 、快速、自包含、高可靠性、功能齐全的SQL数据库引擎。SQLite是世界上最常用的数据库引擎。SQLite内置在所有手机和大多数计算机中，并捆绑在人们每天使用的无数其他应用程序中。SQLite文件格式稳定，跨平台且向后兼容，开发人员保证在2050年之前保持这种格式。SQLite数据库文件通常用作在系统之间传输丰富内容的容器， 以及用作数据的长期归档格式。活跃使用的SQLite数据库超过1万亿。SQLite源代码是公开的，任何人都可以免费使用它用于任何目的。

> 抄自LitePal github

LitePal是一个开源的Android库，允许开发人员非常容易地使用SQLite数据库。可以在不编写SQL语句的情况下完成大部分数据库操作，包括创建或升级表、crud操作、聚合函数等。LitePal的设置也非常简单，可以在不到5分钟的时间内将其集成到项目中。LitePal还具有以下特性。使用对象关系映射（ORM）模式；几乎没有配置(只有一个配置文件和几个属性)；自动维护所有表(例如。创建，修改或删除表)；多数据库支持；不需要编写SQL语句的封装api；非常流畅的查询API；仍然可以选择使用SQL，但是比原始api更简单、更好；

### 网络框架Retrofit

Retrofit是一个RESTful的Http网络请求框架的封装，其基于网络请求框架OkHttp，前者专注于接口的封装，后者专注于网络请求的高效。

### 图片加载与处理-Glide

> 从官网抄的

Glide是一个快速高效的Android图片加载库，注重于平滑的滚动。Glide提供了易用的API，高性能、可扩展的图片解码管道（decode pipeline），以及自动的资源池技术。Glide 支持拉取，解码和展示视频快照，图片，和GIF动画。Glide的Api非常的灵活，开发者甚至可以插入和替换成自己喜爱的任何网络栈。默认情况下，Glide使用的是一个定制化的基于`HttpUrlConnection`的栈，但同时也提供了与Google Volley和Square OkHttp快速集成的工具库。虽然Glide 的主要目标是让任何形式的图片列表的滚动尽可能地变得更快、更平滑，但实际上，Glide几乎能满足对远程图片的拉取/缩放/显示的一切需求。默认情况下，Glide 会在开始一个新的图片请求之前检查以下4级的缓存：

1. 活动资源 (Active Resources) - 现在是否有另一个 View 正在展示这张图片？
2. 内存缓存 (Memory cache) - 该图片是否最近被加载过并仍存在于内存中？
3. 资源类型（Resource） - 该图片是否之前曾被解码、转换并写入过磁盘缓存？
4. 数据来源 (Data) - 构建这个图片的资源是否之前曾被写入过文件缓存？

多级的图片缓存能大大加快图片的加载速度并节约内存。

### 高性能key-value组件MMKV

> 从github抄的

MMKV是一个基于 mmap 的高性能通用 key-value 组件，底层序列化/反序列化使用 protobuf 实现，性能高，稳定性强。其通过 mmap 内存映射文件，提供一段可供随时写入的内存块，App 只管往里面写数据，由操作系统负责将内存回写到文件，不必担心 crash 导致数据丢失。数据序列化方面选用protobuf 协议，pb 在性能和空间占用上都有不错的表现。

### UI设计-MaterialDesign

> material官网抄的

Material是谷歌创建的一个设计系统，帮助团队为Android, iOS, Flutter和web构建高质量的UI。Material Design的灵感来自于物理世界及其纹理，包括它们如何反射光线和投射阴影。材料表面重新想象了纸张和墨水的媒介。Material 组件是用于创建用户界面的交互式构建块，包括一个内置的状态系统，用于交流焦点、选择、激活、错误、悬停、按下、拖动和禁用状态。组件库可用于Android、iOS、Flutter和web。

### MVVM架构设计

> 从https://mp.weixin.qq.com/s/t1VBFZSOrzfxjxbfELF2Ng抄的，字数不够可以多抄些

![mvvm](http://img.inaction.fun/static/44037.png)

本项目的前端采用MVVM架构，MVVM即Model-View-ViewModel，职责分类如下：

* Model，模型层，即数据模型，用于获取和存储数据。
* View，视图，即Activity/Fragment。
* ViewModel，视图模型，负责业务逻辑。

MVVM 的本质是 数据驱动，把解耦做的更彻底，viewModel不持有view 。

View 产生事件，使用 ViewModel进行逻辑处理后，通知Model更新数据，Model把更新的数据给ViewModel，ViewModel自动通知View更新界面，而不是主动调用View的方法。

Jetpack MVVM 是 MVVM 模式在 Android 开发中的一个具体实现，是 Android中 Google 官方提供并推荐的 MVVM实现方式。不仅通过数据驱动完成彻底解耦，还兼顾了 Android 页面开发中其他不可预期的错误，例如Lifecycle 能在妥善处理 页面生命周期 避免view空指针问题，ViewModel使得UI发生重建时 无需重新向后台请求数据，节省了开销，让视图重建时更快展示数据。

## 后端相关技术介绍

### Ktor框架

> 从https://ktor.io/docs/welcome.html抄的

Ktor是一个易于构建连接应用程序的框架——web应用程序、HTTP服务、移动和浏览器应用程序。现代的连接应用程序需要是异步的，以便为用户提供最好的体验，而Kotlin协程提供了很棒的工具，可以以简单而直接的方式做到这一点。虽然还没有完全实现，但Ktor的目标是为连接的应用程序提供端到端多平台应用程序框架。目前，支持JVM客户端和服务器场景，以及JavaScript、iOS和Android客户端，正致力于将服务器设施引入本地环境，并将客户端设施引入其他本地目标。

### MongoDB数据库

MongoDB是一个源代码可用的跨平台面向文档的数据库程序。MongoDB是NoSQL数据库，它使用具有可选模式的类似json的文档。MongoDB由MongoDB公司开发，使用SSPL (Server Side Public License)协议。MongoDB的文档数据模型自然支持JSON，其表达性查询语言易于开发人员学习和使用。自动故障转移、水平扩展和向某个位置分配数据的能力等功能都是内置的。其文档模型映射到应用程序代码中的对象，使数据易于使用。临时查询、索引和实时聚合提供了访问和分析数据的强大方法。MongoDB的核心是分布式数据库，因此它内置了高可用性、水平扩展和地理分布，并且易于使用。MongoDB是免费的。2018年10月16日前发布的版本在AGPL下发布。2018年10月16日之后发布的所有版本，包括以前版本的补丁修复，都在服务器端公共许可证(SSPL) v1下发布。

### 腾讯云短信SMS

本项目使用腾讯云短信来给用户发送验证码短信。腾讯云短信可支持全球 200+ 国家/地区的文本短信发送，覆盖全球 1000+ 运营商，即时触达全球各地。并支持 HTTPS、CMPP、SMPP 等标准协议，灵活提供多种语言 SDK，最快10分钟接入，1小时上线。

### Gson

Gson是一个由Google开发的用来处理json格式数据的java库，它可以将Java对象转换为它们的JSON表示。它还可以用于将JSON字符串转换为等价的Java对象。本项目的网络传输均使用json格式，借助于Gson来做相关的转换工作。

